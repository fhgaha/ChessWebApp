@model ChessWebApp.Square[,]

<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

    .board-zone {
        border-collapse: collapse;
        /*to center the whole table:*/
        margin-left: auto;
        margin-right: auto;
    }

        .board-zone th {
            padding: .5em;
            font-size: large;
            text-align: center;
        }

        .board-zone td {
            width: 50px;
            height: 50px;
            padding: 0;
        }

        .board-zone button {
            border: none;
            background-color: transparent;
            height: 100%;
            width: 100%;
        }

    .rank-number {
    }

    .file-letter {
    }
</style>

@{
    ViewData["Title"] = "Index";

    string[] squareImgNames = { "lightSquare.png", "darkSquare.png" };
}

<form>

    <table class="board-zone">
        <tbody>

            @for (int i = 0; i < Model.GetLength(0); i++)
            {
                <tr>

                    @{ var rank = Board.BoardLength - i + " ";}

                    <th class="rank-number">@rank</th>

                    @for (int j = 0; j < Model.GetLength(1); j++)
                    {
                        var square = Model[i, j].SquareColor;
                        var squareColor = (i + j) % 2 == 0 ? "#eee" : "#aaa";

                        <td style="background: @squareColor; ">

                            <button class="square-button"  name="location" value="@Model[i, j].Location.ToString()"
                                    asp-controller="Home" asp-action="HandleButtonClick">
                                @if (Model[i, j].IsOccupied)
                                {

                                    var piece = Model[i, j].CurrentPiece;

                                    string pieceColor = piece.PieceColor == PieceColor.Light ? "white" : "black";
                                    string pieceClass = piece.GetType().Name;
                                    string fileType = ".png";

                                    <img width="100%" src="~/img/pieceImgs/@pieceColor@pieceClass@fileType" />
                                }
                            </button>
                        </td>
                    }
                </tr>
            }

            <tr>
                <th></th>
                @foreach (var file in Enum.GetValues(typeof(File)))
                {
                    <th class="file-letter">@file</th>
                }
            </tr>

        </tbody>
    </table>
</form>


